<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>测试 websocket</title>
</head>
<body>
    <input type="text" id="input">
    <button onclick="send()">发送</button>

<script>
    //初始化websocket
    var websocket = new WebSocket("ws://127.0.0.1:8080/chess/webSocketTest/100")//war表示变量
    //连接建立成功时自动调用
    websocket.onopen = function() {
        console.log("连接成功")
    }

    websocket.close = function() {
        console.log("连接断开")
    }

    websocket.onerror = function() {  
        console.log("连接异常")
    }
    websocket.onmessage = function(event) {
        console.log("收到消息：" + event.data); 
    }

    window.onbeforeunload = function() {
        websocket.close();
    }

    function send() {
        //把输入框中的内容发送到服务器这边
        var input = document.getElementById("input");//document和window非常重要的对象
        //document分析页面html结构  window感知页面变化
        console.log("发送数据：" + input.value); 
        websocket.send(input.value);
    }
</script>
</body>
</html>